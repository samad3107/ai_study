{% extends "base.html" %}

{% block content %}
<div class="max-w-5xl mx-auto p-6">
    <h1 class="text-5xl font-extrabold mb-4 text-center">
        <span class="text-cyan-400">Assessment Complete</span>
    </h1>
    <p class="text-xl text-gray-400 text-center mb-8">Results for Quiz on: <span class="text-white">{{ attempt.quiz.topic }}</span></p>

    <div class="futuristic-card p-10 rounded-2xl shadow-cyan-500/50 mb-10 text-center">
        <h2 class="text-6xl font-black mb-3">
            {{ attempt.score }} / {{ attempt.total_questions }}
        </h2>
        <p class="text-3xl font-bold {% if percentage >= 80 %}text-green-400{% elif percentage >= 50 %}text-yellow-400{% else %}text-red-400{% endif %} mb-6">
            {{ percentage }}% Mastery
        </p>
        
        <div class="border-t border-b border-gray-700 py-4 mt-6">
            <h3 class="text-xl font-semibold text-cyan-400 mb-2">AI Coaching Message:</h3>
            <p class="text-lg futuristic-text italic whitespace-pre-wrap">{{ attempt.feedback_message }}</p>
        </div>

        <a href="{% url 'quiz_list' %}" class="mt-6 inline-block py-3 px-8 bg-cyan-600 rounded-lg futuristic-glow hover:bg-cyan-500 transition duration-300 font-semibold text-white">
            Back to Quizzes
        </a>
    </div>

    <h2 class="text-3xl font-semibold text-white mb-4 border-b border-gray-700 pb-2">
        Quiz Review
    </h2>
    <p class="text-gray-500 mb-6">The answers you submitted were graded against the AI's correct indices (0 is the first option).</p>

    <div class="space-y-6">
        {% for question in questions %}
        <div class="futuristic-card p-5 rounded-lg border-l-4 
             border-cyan-500">
            <p class="font-medium text-white mb-3">Q{{ forloop.counter }}: {{ question.data.text }}</p>
            <p class="text-sm text-green-400">
                Correct Answer Index: {{ question.data.correct_answer_index }} 
                (Option Index is displayed)
            </p>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock content %}